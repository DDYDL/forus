<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="mapper.reservation">

    <select id="findHospitalTimeByHospitalId" parameterType="map" resultType="dto.Hospital_time">
        SELECT
        h_id,
        htime_week,
        htime_opening,
        htime_closing,
        htime_isable
        FROM
        hospital_time
        WHERE
        h_id = #{hospitalId}
        AND htime_week = DATE_FORMAT(#{date}, '%W');
    </select>


    <select id="findHospitalLunchTimeAndIntervalByHospitalId" parameterType="int" resultType="dto.Hospital">
        SELECT h_lunch_time_start,
               h_lunch_time_end,
               h_interval_time
        FROM hospital
        WHERE h_id = #{hospitalId}
    </select>

    <!-- 해당 병원과 날짜에 예약된 시간들을 조회하는 쿼리 -->
    <select id="findReservedTimesByDate" parameterType="map" resultType="dto.Reservation">
        SELECT reserv_time
        FROM reservation
        WHERE h_id = #{hospitalId}
          AND reserv_date = #{date}
    </select>

</mapper>